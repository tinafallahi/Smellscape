
var __cov_HwgIBr3GECUgurjFD9dqmA = (Function('return this'))();
if (!__cov_HwgIBr3GECUgurjFD9dqmA.__coverage__) { __cov_HwgIBr3GECUgurjFD9dqmA.__coverage__ = {}; }
__cov_HwgIBr3GECUgurjFD9dqmA = __cov_HwgIBr3GECUgurjFD9dqmA.__coverage__;
if (!(__cov_HwgIBr3GECUgurjFD9dqmA['server/bookshelf_rest.js'])) {
   __cov_HwgIBr3GECUgurjFD9dqmA['server/bookshelf_rest.js'] = {"path":"server/bookshelf_rest.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":52}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":29},"end":{"line":7,"column":54}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":40},"end":{"line":15,"column":61}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":40},"end":{"line":20,"column":65}}},"5":{"name":"(anonymous_5)","line":24,"loc":{"start":{"line":24,"column":20},"end":{"line":24,"column":37}}},"6":{"name":"save_item","line":29,"loc":{"start":{"line":29,"column":2},"end":{"line":29,"column":32}}},"7":{"name":"(anonymous_7)","line":30,"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":46}}},"8":{"name":"(anonymous_8)","line":32,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":27}}},"9":{"name":"(anonymous_9)","line":38,"loc":{"start":{"line":38,"column":30},"end":{"line":38,"column":55}}},"10":{"name":"(anonymous_10)","line":40,"loc":{"start":{"line":40,"column":33},"end":{"line":40,"column":48}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"2":{"start":{"line":3,"column":0},"end":{"line":48,"column":2}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":26}},"4":{"start":{"line":6,"column":2},"end":{"line":6,"column":32}},"5":{"start":{"line":7,"column":2},"end":{"line":18,"column":5}},"6":{"start":{"line":8,"column":4},"end":{"line":8,"column":21}},"7":{"start":{"line":9,"column":4},"end":{"line":12,"column":5}},"8":{"start":{"line":10,"column":6},"end":{"line":10,"column":32}},"9":{"start":{"line":11,"column":6},"end":{"line":11,"column":33}},"10":{"start":{"line":13,"column":4},"end":{"line":17,"column":7}},"11":{"start":{"line":16,"column":6},"end":{"line":16,"column":27}},"12":{"start":{"line":20,"column":2},"end":{"line":27,"column":5}},"13":{"start":{"line":21,"column":4},"end":{"line":21,"column":31}},"14":{"start":{"line":22,"column":4},"end":{"line":26,"column":7}},"15":{"start":{"line":25,"column":6},"end":{"line":25,"column":23}},"16":{"start":{"line":29,"column":2},"end":{"line":36,"column":3}},"17":{"start":{"line":30,"column":4},"end":{"line":35,"column":7}},"18":{"start":{"line":31,"column":6},"end":{"line":31,"column":20}},"19":{"start":{"line":33,"column":6},"end":{"line":33,"column":23}},"20":{"start":{"line":34,"column":6},"end":{"line":34,"column":32}},"21":{"start":{"line":38,"column":2},"end":{"line":46,"column":5}},"22":{"start":{"line":39,"column":4},"end":{"line":45,"column":5}},"23":{"start":{"line":40,"column":6},"end":{"line":42,"column":9}},"24":{"start":{"line":41,"column":8},"end":{"line":41,"column":29}},"25":{"start":{"line":44,"column":6},"end":{"line":44,"column":31}},"26":{"start":{"line":47,"column":2},"end":{"line":47,"column":16}}},"branchMap":{"1":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":19}},{"start":{"line":4,"column":23},"end":{"line":4,"column":25}}]},"2":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":4}},{"start":{"line":9,"column":4},"end":{"line":9,"column":4}}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]}}};
}
__cov_HwgIBr3GECUgurjFD9dqmA = __cov_HwgIBr3GECUgurjFD9dqmA['server/bookshelf_rest.js'];
__cov_HwgIBr3GECUgurjFD9dqmA.s['1']++;var express=require('express');__cov_HwgIBr3GECUgurjFD9dqmA.s['2']++;module.exports=function(model,resource,options){__cov_HwgIBr3GECUgurjFD9dqmA.f['1']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['3']++;options=(__cov_HwgIBr3GECUgurjFD9dqmA.b['1'][0]++,options)||(__cov_HwgIBr3GECUgurjFD9dqmA.b['1'][1]++,{});__cov_HwgIBr3GECUgurjFD9dqmA.s['4']++;var router=express.Router();__cov_HwgIBr3GECUgurjFD9dqmA.s['5']++;router.get('/'+resource,function(req,res,next){__cov_HwgIBr3GECUgurjFD9dqmA.f['2']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['6']++;var select='*';__cov_HwgIBr3GECUgurjFD9dqmA.s['7']++;if(req.query.select){__cov_HwgIBr3GECUgurjFD9dqmA.b['2'][0]++;__cov_HwgIBr3GECUgurjFD9dqmA.s['8']++;select=req.query.select;__cov_HwgIBr3GECUgurjFD9dqmA.s['9']++;delete req.query['select'];}else{__cov_HwgIBr3GECUgurjFD9dqmA.b['2'][1]++;}__cov_HwgIBr3GECUgurjFD9dqmA.s['10']++;model.query({select:select}).where(req.query).fetchAll().then(function(collection){__cov_HwgIBr3GECUgurjFD9dqmA.f['3']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['11']++;res.json(collection);});});__cov_HwgIBr3GECUgurjFD9dqmA.s['12']++;router.get('/'+resource+'/:pkid',function(req,res,next){__cov_HwgIBr3GECUgurjFD9dqmA.f['4']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['13']++;var pkid=req.params.pkid;__cov_HwgIBr3GECUgurjFD9dqmA.s['14']++;new model({id:pkid}).fetch().then(function(result){__cov_HwgIBr3GECUgurjFD9dqmA.f['5']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['15']++;res.json(result);});});function save_item(item,res){__cov_HwgIBr3GECUgurjFD9dqmA.f['6']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['17']++;new model(item).save().then(function(row){__cov_HwgIBr3GECUgurjFD9dqmA.f['7']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['18']++;res.json(row);}).catch(function(err){__cov_HwgIBr3GECUgurjFD9dqmA.f['8']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['19']++;console.log(err);__cov_HwgIBr3GECUgurjFD9dqmA.s['20']++;res.status(500).send(err);});}__cov_HwgIBr3GECUgurjFD9dqmA.s['21']++;router.post('/'+resource,function(req,res,next){__cov_HwgIBr3GECUgurjFD9dqmA.f['9']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['22']++;if(options.pre_save){__cov_HwgIBr3GECUgurjFD9dqmA.b['3'][0]++;__cov_HwgIBr3GECUgurjFD9dqmA.s['23']++;options.pre_save(req,res,function(item){__cov_HwgIBr3GECUgurjFD9dqmA.f['10']++;__cov_HwgIBr3GECUgurjFD9dqmA.s['24']++;save_item(item,res);});}else{__cov_HwgIBr3GECUgurjFD9dqmA.b['3'][1]++;__cov_HwgIBr3GECUgurjFD9dqmA.s['25']++;save_item(req.body,res);}});__cov_HwgIBr3GECUgurjFD9dqmA.s['26']++;return router;};
